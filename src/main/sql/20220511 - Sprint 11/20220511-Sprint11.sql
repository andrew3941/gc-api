Update gestion_centros.conf_proveedores_detalles set etiqueta='Recogida' Where etiqueta='Recogida de paqueter√≠a';
Insert into gestion_centros.conf_proveedores_detalles (id,tipo_proveedor_id, tipo_atributo_id, etiqueta, orden, activo) values ((Select MAX(id) from gestion_centros.conf_proveedores_detalles)+1 ,(Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MANTENIMIENTO FOTOCOPIADORAS'),2,'Copias media mensual byn',(SELECT COUNT(orden) from gestion_centros.conf_proveedores_detalles where tipo_proveedor_id = (Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MANTENIMIENTO FOTOCOPIADORAS')),true);
Insert into gestion_centros.conf_proveedores_detalles (id,tipo_proveedor_id, tipo_atributo_id, etiqueta, orden, activo) values ((Select MAX(id) from gestion_centros.conf_proveedores_detalles)+1 ,(Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MANTENIMIENTO FOTOCOPIADORAS'),2,'Copias media mensual COLOR',(SELECT COUNT(orden) from gestion_centros.conf_proveedores_detalles where tipo_proveedor_id = (Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MANTENIMIENTO FOTOCOPIADORAS')),true);
Insert into gestion_centros.conf_proveedores_detalles (id,tipo_proveedor_id, tipo_atributo_id, etiqueta, orden, activo) values ((Select MAX(id) from gestion_centros.conf_proveedores_detalles)+1 ,(Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MANTENIMIENTO FOTOCOPIADORAS'),5,'Recogida de toner,',(SELECT MAX(orden)+1 from gestion_centros.conf_proveedores_detalles where tipo_proveedor_id = (Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MANTENIMIENTO FOTOCOPIADORAS')),true);
Insert into gestion_centros.conf_proveedores_detalles (id,tipo_proveedor_id, tipo_atributo_id, etiqueta, orden, activo) values ((Select MAX(id) from gestion_centros.conf_proveedores_detalles)+1 ,(Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MANTENIMIENTO FOTOCOPIADORAS'),2,'Importe de la recogida,',(SELECT MAX(orden)+1 from gestion_centros.conf_proveedores_detalles where tipo_proveedor_id = (Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MANTENIMIENTO FOTOCOPIADORAS')),true);
Update gestion_centros.conf_proveedores_detalles set activo = false where tipo_proveedor_id = (Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MATERIAL IMPRENTA') OR tipo_proveedor_id = (Select p.id from gestion_centros.tm_proveedores_tipos p where denominacion = 'MATERIAL OFICINA') AND etiqueta = 'Coste mensual' OR etiqueta = 'Coste anual';
Insert into gestion_centros.tm_proveedores_tipos values ((Select MAX(id)+1 from gestion_centros.tm_proveedores_tipos),'MENSAJERIA',null,true,(Select MAX(count)+1 from gestion_centros.tm_proveedores_tipos));